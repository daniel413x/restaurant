"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[463],{8945:function(e,s,t){var a=t(1413),n=t(5861),r=t(885),i=t(7757),l=t.n(i),d=t(2791),o=t(2677),u=t(3855),c=t(9743),m=t(3983),p=t(1338),f=t(6925),b=t(3958),h=t(7155),x=t(5251),S=t(5567),Z=t(1733),v=t(184);s.Z=function(e){var s=e.onSuccess,t=e.forLogin,i=(0,d.useContext)(b.Z),y=i.notifications,g=i.user,j=i.cart,C=i.addresses,k=(0,d.useState)(!1),w=(0,r.Z)(k,2),P=w[0],I=w[1],N=(0,d.useState)(!1),R=(0,r.Z)(N,2),q=R[0],E=R[1],L=(0,d.useState)(""),U=(0,r.Z)(L,2),M=U[0],O=U[1],Q=(0,d.useState)(""),_=(0,r.Z)(Q,2),A=_[0],D=_[1],F=(0,d.useState)(""),z=(0,r.Z)(F,2),B=z[0],H=z[1],T=(0,d.useState)(""),W=(0,r.Z)(T,2),Y=W[0],G=W[1],J=(0,d.useState)(""),K=(0,r.Z)(J,2),V=K[0],X=K[1],$=(0,d.useState)(""),ee=(0,r.Z)($,2),se=ee[0],te=ee[1],ae=(0,d.useState)(""),ne=(0,r.Z)(ae,2),re=ne[0],ie=ne[1],le=(0,d.useState)(""),de=(0,r.Z)(le,2),oe=de[0],ue=de[1],ce=(0,d.useState)(""),me=(0,r.Z)(ce,2),pe=me[0],fe=me[1],be=(0,d.useState)(""),he=(0,r.Z)(be,2),xe=he[0],Se=he[1],Ze=function(){var e=(0,n.Z)(l().mark((function e(n){var r,i,d,o,u,c,p,f,b,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),I(!0),M&&A){e.next=5;break}return y.message("Please complete required fields",m.Q6,m.j8),e.abrupt("return");case 5:if((0,Z.oH)(M)){e.next=9;break}return y.message("Invalid email format",m.Q6,m.Ex),e.abrupt("return");case 9:if((0,Z.uo)(A)||t){e.next=13;break}return y.message("Please choose a password between 6 and 256 characters",m.Q6,m.Ex),e.abrupt("return");case 13:if(!q||B&&V&&se&&oe&&pe&&xe){e.next=16;break}return y.message("Please complete required fields",m.Q6,m.j8),e.abrupt("return");case 16:if(e.prev=16,!t){e.next=30;break}return i=j.foodItems.length>0&&(null===(r=j.foodItems[0])||void 0===r?void 0:r.UserId)!==g.id,e.next=21,(0,h.x4)(M,A,i?j.foodItems:void 0);case 21:return d=e.sent,e.next=24,(0,S.y)();case 24:o=e.sent,g.set(d),j.set(o),i&&(u=j.foodItems.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{UserId:g.id})})),j.setItems(u)),e.next=50;break;case 30:if(!(g.roles.indexOf(m._5)>=0&&j.UserId===g.id)){e.next=38;break}return e.next=34,(0,h.nq)(M,A);case 34:c=e.sent,g.set(c),e.next=45;break;case 38:return e.next=40,(0,h.l9)({email:M,password:A});case 40:p=e.sent,f=p.newUser,b=p.newCart,g.set(f),j.set(b);case 45:if(!q){e.next=50;break}return e.next=48,(0,x.p6)({firstName:B,lastName:V,addressLineOne:se,addressLineTwo:re,city:oe,state:pe,zip:xe,isDefault:!0,UserId:g.id});case 48:v=e.sent,C.addAddress(v);case 50:s(),e.next=56;break;case 53:e.prev=53,e.t0=e.catch(16),y.message(e.t0.response.data.message,m.Q6,m.j8);case 56:case"end":return e.stop()}}),e,null,[[16,53]])})));return function(s){return e.apply(this,arguments)}}();return(0,v.jsx)(o.Z,{className:"auth-box",children:(0,v.jsxs)(u.Z,{onSubmit:function(e){return Ze(e)},children:[(0,v.jsx)(p.Z,{id:"email-field",label:"Email address",onChange:O,value:M,placeholder:t?"":"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{id:"password-field",label:"Password",type:"password",onChange:D,value:A,placeholder:t?"":"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),t?(0,v.jsx)("div",{className:"no-shift"}):(0,v.jsxs)("div",{className:"default-address-form",children:[(0,v.jsx)(f.Z,{id:"save-default-address-button",label:"Save a default delivery address (optional)",boolean:q,setBoolean:E,classes:"toggle-default-address-form"}),q&&(0,v.jsxs)("div",{children:[(0,v.jsxs)(c.Z,{children:[(0,v.jsx)(p.Z,{id:"first-name-field",label:"First name",onChange:H,value:B,placeholder:"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{label:"Middle name",id:"middle-name-field",classes:"blocked",onChange:G,value:Y,placeholder:"Optional",pressedSubmit:P,setPressedSubmit:I,optional:!0,primaryStyle:!0})]}),(0,v.jsx)(p.Z,{label:"Last name",id:"last-name-field",onChange:X,value:V,placeholder:"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{label:"Address line one",id:"address-line-one-field",onChange:te,value:se,placeholder:"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{id:"address-line-two-field",label:"Address line two",onChange:ie,value:re,placeholder:"Optional",pressedSubmit:P,setPressedSubmit:I,optional:!0,primaryStyle:!0}),(0,v.jsxs)(c.Z,{className:"city-state-row",children:[(0,v.jsx)(p.Z,{id:"city-field",label:"City",onChange:ue,value:oe,placeholder:"Required",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{label:"State",id:"state-field",classes:"px-1",onChange:fe,value:pe,placeholder:"Req.",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0}),(0,v.jsx)(p.Z,{label:"Zip",id:"zip-field",onChange:Se,value:xe,placeholder:"Req.",pressedSubmit:P,setPressedSubmit:I,primaryStyle:!0})]})]})]}),(0,v.jsx)(o.Z,{md:"auto",children:(0,v.jsx)(u.Z.Control,{id:"submit-button",type:"submit",value:"Submit"})})]})})}},6925:function(e,s,t){var a=t(885),n=t(2791),r=t(734),i=t(184);function l(e){var s=e.label,t=e.boolean,l=e.setBoolean,d=e.classes,o=e.light,u=e.id,c=(0,n.useState)(!1),m=(0,a.Z)(c,2),p=m[0],f=m[1],b=(0,n.useState)(!1),h=(0,a.Z)(b,2),x=h[0],S=h[1],Z=(0,n.useRef)(null);(0,r.Z)(Z,(function(){return S(!1)})),(0,n.useEffect)((function(){S(t)}),[t]);var v=null;return o&&x?v="box-shadow-light":x&&(v="box-shadow"),(0,i.jsxs)("button",{id:u,className:"labeled-checkbox-button ".concat(d),ref:Z,type:"button",onMouseUp:function(){return f(!1)},onMouseLeave:function(){return f(!1)},onMouseDown:function(){return f(!0)},onMouseEnter:function(e){e.buttons>0&&f(!0)},onClick:function(){l(!t),S(!t)},children:[(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"checkbox-div ".concat(t&&"checked"," ").concat(p&&"active"," ").concat(v)})}),(0,i.jsx)("div",{className:"label",children:s})]})}l.defaultProps={light:!1,classes:"",id:""},s.Z=l},1338:function(e,s,t){var a=t(885),n=t(2791),r=t(2677),i=t(3855),l=t(184);function d(e){var s=e.label,t=e.onChange,d=e.onFileChange,o=e.value,u=e.placeholder,c=e.pressedSubmit,m=e.setPressedSubmit,p=e.optional,f=e.bsWidth,b=e.primaryStyle,h=e.type,x=e.classes,S=e.id,Z=e.tabIndex,v=(0,n.useState)(!1),y=(0,a.Z)(v,2),g=y[0],j=y[1];return(0,n.useEffect)((function(){!c||p||o||j(!0)}),[c]),(0,n.useEffect)((function(){m&&(j(!1),m(!1))}),[o]),(0,l.jsxs)(r.Z,{className:"smart-input ".concat(x),md:f,children:[s&&(0,l.jsx)("span",{className:"label",children:s}),"file"===h?(0,l.jsx)(i.Z.Control,{id:S,placeholder:u,type:h,onChange:d,className:"".concat(g&&"warn"," ").concat(b&&"primary-style"),tabIndex:Z,onClick:function(){m&&(j(!1),m(!1))}}):(0,l.jsx)(i.Z.Control,{id:S,placeholder:u,type:h,value:o,tabIndex:Z,onChange:function(e){return t(e.target.value)},className:"".concat(g&&"warn"," ").concat(b&&"primary-style")})]})}d.defaultProps={placeholder:"",optional:!1,bsWidth:!1,primaryStyle:!1,value:"",onChange:!1,onFileChange:!1,pressedSubmit:!1,setPressedSubmit:!1,label:"",type:"text",classes:"",id:"",tabIndex:void 0},s.Z=d},5463:function(e,s,t){t.r(s);var a=t(885),n=t(2791),r=t(6871),i=t(3504),l=t(7022),d=t(3983),o=t(8945),u=t(3958),c=t(184);s.default=function(){var e=(0,r.TH)(),s=(0,r.s0)(),t=(0,n.useContext)(u.Z),m=t.notifications,p=t.user,f=(0,n.useState)(!1),b=(0,a.Z)(f,2),h=b[0],x=b[1];return(0,n.useEffect)((function(){p.isRegistered&&s(d.Im),e.pathname==="/".concat(d._e)?x(!0):x(!1)}),[]),(0,c.jsxs)(l.Z,{id:"auth",children:[(0,c.jsx)("h2",{children:h?"Login":"Registration"}),(0,c.jsx)(o.Z,{onSuccess:function(){m.message(h?"You logged in successfully":"Registration successful",d.ek,d.j8),s(d.Im)},forLogin:h}),(0,c.jsx)(i.OL,{id:"switch-link",to:"/".concat(h?d._6:d._e),children:h?"Register an account":"I'm already registered"})]})}}}]);
//# sourceMappingURL=463.ab92889e.chunk.js.map