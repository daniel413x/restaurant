"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[605],{1338:function(e,t,r){var n=r(885),s=r(2791),a=r(2677),i=r(3855),c=r(184);function u(e){var t=e.label,r=e.onChange,u=e.onFileChange,o=e.value,d=e.placeholder,l=e.pressedSubmit,m=e.setPressedSubmit,p=e.optional,f=e.bsWidth,h=e.primaryStyle,x=e.type,b=e.classes,v=e.id,Z=e.tabIndex,S=(0,s.useState)(!1),j=(0,n.Z)(S,2),y=j[0],g=j[1];return(0,s.useEffect)((function(){!l||p||o||g(!0)}),[l]),(0,s.useEffect)((function(){m&&(g(!1),m(!1))}),[o]),(0,c.jsxs)(a.Z,{className:"smart-input ".concat(b),md:f,children:[t&&(0,c.jsx)("span",{className:"label",children:t}),"file"===x?(0,c.jsx)(i.Z.Control,{id:v,placeholder:d,type:x,onChange:u,className:"".concat(y&&"warn"," ").concat(h&&"primary-style"),tabIndex:Z,onClick:function(){m&&(g(!1),m(!1))}}):(0,c.jsx)(i.Z.Control,{id:v,placeholder:d,type:x,value:o,tabIndex:Z,onChange:function(e){return r(e.target.value)},className:"".concat(y&&"warn"," ").concat(h&&"primary-style")})]})}u.defaultProps={placeholder:"",optional:!1,bsWidth:!1,primaryStyle:!1,value:"",onChange:!1,onFileChange:!1,pressedSubmit:!1,setPressedSubmit:!1,label:"",type:"text",classes:"",id:"",tabIndex:void 0},t.Z=u},580:function(e,t,r){r.d(t,{$x:function(){return m},E7:function(){return l},Wh:function(){return p},dT:function(){return c},h_:function(){return u},li:function(){return o},pm:function(){return d}});var n=r(5861),s=r(7757),a=r.n(s),i=r(5229),c=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order/all");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order/activeorder");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.post("api/order",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.put("api/order/changestatus/".concat(t),{status:r});case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,n.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.post("api/order/guest",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order/guest/activeorder");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},605:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var n=r(1413),s=r(5861),a=r(885),i=r(7757),c=r.n(i),u=r(2791),o=r(7022),d=r(2677),l=r(3360),m=r(4483),p=r(3174),f=r(32),h=r(2249),x=r(6183),b=r(1733),v=r(5316),Z=r(3855),S=r(3983),j=r(3958),y=r(3391),g=r(184);var k=function(e){var t=e.onHide,r=e.show,n=e.itemName,a=e.itemId,i=(0,u.useContext)(j.Z),o=i.notifications,d=i.cart,m=i.user,p=function(){var e=(0,s.Z)(c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,!m.isGuest){e.next=7;break}n=JSON.parse(localStorage.getItem("guestCartItems")).filter((function(e){return e.id!==a})),localStorage.setItem("guestCartItems",JSON.stringify(n)),e.next=9;break;case 7:return e.next=9,(0,y.c5)(a);case 9:d.changeItemQuantity(a,0),o.message("Item removed from cart",S.ek,S.j8),t(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),o.message(e.t0.response.data.message,S.Q6,S.j8);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsx)(v.Z,{show:r,onHide:t,size:"lg",centered:!0,className:"remove-item",children:(0,g.jsxs)(Z.Z,{onSubmit:p,children:[(0,g.jsxs)(v.Z.Body,{children:[(0,g.jsx)("h2",{children:"Remove from cart?"}),n]}),(0,g.jsxs)(v.Z.Footer,{children:[(0,g.jsx)(l.Z,{id:"submit-button",type:"submit",children:"Confirm"}),(0,g.jsx)(l.Z,{id:"cancel-button",onClick:t,children:"Back"})]})]})})},w=r(5987),C=r(1694),N=r.n(C),I=r(162),P=["bsPrefix","variant","animation","size","as","className"],q=u.forwardRef((function(e,t){var r=e.bsPrefix,s=e.variant,a=e.animation,i=e.size,c=e.as,u=void 0===c?"div":c,o=e.className,d=(0,w.Z)(e,P);r=(0,I.vE)(r,"spinner");var l="".concat(r,"-").concat(a);return(0,g.jsx)(u,(0,n.Z)((0,n.Z)({ref:t},d),{},{className:N()(o,l,i&&"".concat(l,"-").concat(i),s&&"text-".concat(s))}))}));q.displayName="Spinner";var T=q,G=r(9743),O=r(1293),L=r(3504),E=r(6871),H=r(1338),z=r(580);var F=(0,f.Pi)((function(e){var t=e.onHide,r=e.show,n=e.checkoutItems,i=(0,u.useContext)(j.Z),o=i.notifications,m=i.cart,p=i.user,f=i.addresses,h=(0,u.useState)(""),x=(0,a.Z)(h,2),y=x[0],k=x[1],w=(0,u.useState)(""),C=(0,a.Z)(w,2),N=C[0],I=C[1],P=(0,u.useState)(""),q=(0,a.Z)(P,2),F=q[0],Q=q[1],B=(0,u.useState)(""),W=(0,a.Z)(B,2),$=W[0],A=W[1],J=(0,u.useState)(""),R=(0,a.Z)(J,2),D=R[0],M=R[1],_=(0,u.useState)(""),U=(0,a.Z)(_,2),V=U[0],X=U[1],Y=(0,u.useState)(""),K=(0,a.Z)(Y,2),ee=K[0],te=K[1],re=(0,u.useState)(""),ne=(0,a.Z)(re,2),se=ne[0],ae=ne[1],ie=(0,u.useState)(""),ce=(0,a.Z)(ie,2),ue=ce[0],oe=ce[1],de=(0,u.useState)(""),le=(0,a.Z)(de,2),me=le[0],pe=le[1],fe=(0,u.useState)(""),he=(0,a.Z)(fe,2),xe=he[0],be=he[1],ve=(0,u.useState)(""),Ze=(0,a.Z)(ve,2),Se=Ze[0],je=Ze[1],ye=(0,u.useState)(!1),ge=(0,a.Z)(ye,2),ke=ge[0],we=ge[1],Ce=(0,u.useState)(!1),Ne=(0,a.Z)(Ce,2),Ie=Ne[0],Pe=Ne[1],qe=(0,u.useState)(!1),Te=(0,a.Z)(qe,2),Ge=Te[0],Oe=(Te[1],(0,u.useState)("")),Le=(0,a.Z)(Oe,2),Ee=Le[0],He=(Le[1],(0,E.s0)()),ze=!y||!N||!F||!$||!V||!ee||!se||!ue||!me||!xe||!Se,Fe=function(){var e=(0,s.Z)(c().mark((function e(t){var r,n,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),we(!0),!ze){e.next=4;break}return e.abrupt("return",o.message("Please complete all required fields",S.Q6,S.j8));case 4:if(!(0===m.foodItems.length)){e.next=7;break}return e.abrupt("return",o.message("No items in cart",S.Q6,S.j8));case 7:if(Pe(!0),e.prev=8,r={firstName:N,lastName:F,addressLineOne:$,addressLineTwo:D,city:V,zip:ee,state:se},n=m.id,!p.isGuest){e.next=19;break}return s=m.foodItems,e.next=15,(0,z.$x)({address:r,foodItems:s,guestId:p.id});case 15:e.sent,localStorage.removeItem("guestCartItems"),e.next=23;break;case 19:return a=p.id,e.next=22,(0,z.pm)({UserId:a,CartId:n,address:r});case 22:e.sent;case 23:return m.clearItems(),e.abrupt("return",He(p.isGuest?"/".concat(S.kw,"/").concat(S.Xr):"".concat(S.Oq)));case 29:return e.prev=29,e.t0=e.catch(8),e.abrupt("return",o.message(e.t0.response.data.message,S.Q6,S.j8));case 32:return e.prev=32,Pe(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[8,29,32,35]])})));return function(t){return e.apply(this,arguments)}}(),Qe=function(e){I(e.firstName),Q(e.lastName),A(e.addressLineOne),M(e.addressLineTwo),X(e.city),te(e.zip),ae(e.state)};return(0,u.useEffect)((function(){p.isRegistered&&k(p.email)}),[p.email]),(0,u.useEffect)((function(){f.defaultAddress&&Qe(f.defaultAddress)}),[f.defaultAddress]),(0,g.jsxs)(v.Z,{show:r,onHide:t,centered:!0,className:"shipping-form p-0",id:"checkout",children:[Ie&&(0,g.jsx)(T,{animation:"grow",className:"loading-anim"}),(0,g.jsxs)("div",{className:"".concat(Ie&&"blocked"," checkout"),children:[(0,g.jsx)(v.Z.Header,{closeButton:!0,children:(0,g.jsxs)(v.Z.Title,{id:"contained-modal-title-vcenter",children:[Ge?"Thank you!":"Checkout"," "]})}),(0,g.jsxs)(Z.Z,{onSubmit:Fe,children:[Ge?(0,g.jsxs)(v.Z.Body,{className:"confirmation",children:["A copy of your receipt will be sent to ".concat(y,". Your order number is:"),(0,g.jsx)(d.Z,{className:"order-number",children:"Order #".concat(Ee.slice(0,7))}),"Click 'Track my order' to follow your order!"]}):(0,g.jsxs)(v.Z.Body,{children:[(0,g.jsxs)("div",{className:"receipt",children:[(0,g.jsx)("h5",{children:"Receipt"}),n.map((function(e){return(0,g.jsxs)(G.Z,{className:"item-price-pair",children:[(0,g.jsxs)(d.Z,{className:"item",children:[" ",e.name," ",e.quantity>1&&"(".concat(e.quantity,") ")]}),(0,g.jsxs)(d.Z,{className:"price",children:["$",(0,b.qH)(e.price,e.discount)]})]},e.id)})),"\u2014",(0,g.jsxs)(G.Z,{className:"item-price-pair",children:[(0,g.jsx)(d.Z,{children:"Total"}),(0,g.jsx)(d.Z,{children:(0,g.jsxs)("strong",{children:["$",m.total]})})]})]}),(0,g.jsx)("hr",{}),(0,g.jsx)("h5",{children:"Shipping & billing"}),"* = required field",f.all.length>0&&(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(O.Z.Toggle,{children:"Saved addresses"}),(0,g.jsx)(O.Z.Menu,{children:f.all.map((function(e){return(0,g.jsx)(O.Z.Item,{onClick:function(){return Qe(e)},children:e.addressLineOne},e.id)}))})]}),(0,g.jsx)(H.Z,{id:"email-field",label:"Email*",value:y,onChange:k,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0}),(0,g.jsxs)("div",{className:"name-row",children:[(0,g.jsx)(H.Z,{id:"first-name-field",label:"First name*",value:N,onChange:I,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0}),(0,g.jsx)(H.Z,{primaryStyle:!0,id:"last-name-field",label:"Last name*",value:F,onChange:Q,pressedSubmit:ke,setPressedSubmit:we})]}),(0,g.jsx)(H.Z,{primaryStyle:!0,id:"address-line-one-field",label:"Street address*",value:$,onChange:A,pressedSubmit:ke,setPressedSubmit:we}),(0,g.jsx)(H.Z,{label:"Street address Line Two",id:"address-line-two-field",value:D,onChange:M,pressedSubmit:ke,setPressedSubmit:we,optional:!0,placeholder:"apt., suite",primaryStyle:!0}),(0,g.jsxs)("div",{className:"city-row",children:[(0,g.jsx)(H.Z,{label:"Territory/City*",id:"city-field",value:V,onChange:X,pressedSubmit:ke,setPressedSubmit:we,bsWidth:6,primaryStyle:!0}),(0,g.jsx)(H.Z,{label:"State*",id:"state-field",value:se,onChange:ae,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0}),(0,g.jsx)(H.Z,{label:"Zip address*",id:"zip-field",value:ee,onChange:te,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0})]}),(0,g.jsx)("hr",{}),(0,g.jsx)("h5",{children:"Payment"}),(0,g.jsx)(H.Z,{label:"Full name on card*",id:"card-name-field",value:ue,onChange:oe,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0}),(0,g.jsxs)("div",{className:"card-number-row",children:[(0,g.jsx)(H.Z,{label:"Card number*",id:"card-number-field",value:me,onChange:pe,pressedSubmit:ke,setPressedSubmit:we,bsWidth:6,primaryStyle:!0}),(0,g.jsx)(H.Z,{label:"Expir.*",id:"card-expiration-field",value:xe,onChange:be,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0}),(0,g.jsx)(H.Z,{label:"CVC*",id:"card-cvc-field",value:Se,onChange:je,pressedSubmit:ke,setPressedSubmit:we,primaryStyle:!0})]})]}),(0,g.jsx)(v.Z.Footer,{children:Ge?(0,g.jsx)(L.OL,{to:"/".concat(S.Oq),children:(0,g.jsx)(l.Z,{children:"Track my order"})}):(0,g.jsx)(l.Z,{className:"".concat(ze&&"blocked"),type:"submit",id:"submit-button",children:"Submit"})})]})]})]})}));var Q=(0,f.Pi)((function(){var e=(0,u.useContext)(j.Z).cart,t=(0,b.Ih)(e.foodItems),r=t>0,i=(0,u.useState)(!1),f=(0,a.Z)(i,2),v=f[0],Z=f[1],w=(0,u.useState)(!1),C=(0,a.Z)(w,2),N=C[0],I=C[1],P=(0,u.useState)(null),q=(0,a.Z)(P,2),T=q[0],G=q[1],O=function(){var t=(0,s.Z)(c().mark((function t(r,s,a){var i,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a?s+1:s-1,e.id!==S._5){t.next=6;break}u=JSON.parse(localStorage.getItem("guestCartItems")),localStorage.setItem("guestCartItems",JSON.stringify(u.map((function(e){return e.id===r?(0,n.Z)((0,n.Z)({},e),{},{quantity:i}):e})))),t.next=8;break;case 6:return t.next=8,(0,y.x)(r,i);case 8:e.changeItemQuantity(r,i);case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return(0,g.jsxs)(o.Z,{id:"cart",children:[(0,g.jsx)(k,{show:v,onHide:function(){return Z(!1)},itemName:null===T||void 0===T?void 0:T.name,itemId:null===T||void 0===T?void 0:T.id}),(0,g.jsx)(F,{show:N,onHide:function(){return I(!1)},checkoutItems:e.foodItems}),(0,g.jsxs)(d.Z,{children:[(0,g.jsxs)("h2",{children:["Cart"," ",(0,g.jsx)(m.G,{icon:p.szZ})]}),(0,g.jsx)(d.Z,{className:"items",md:3,children:t?"".concat(t," item").concat(t>1?"s":""," in your cart:"):"No items in your cart"}),(0,g.jsx)(h.Z,{items:e.foodItems,renderList:function(e){return(0,g.jsx)("li",{children:(0,g.jsx)(x.Z,{foodItem:e,handleDeleteModal:function(){return G(e),void Z(!0)},quantity:e.quantity,increment:function(){return O(e.id,e.quantity,!0)},decrement:function(){return O(e.id,e.quantity)}})},e.id)}}),r&&(0,g.jsxs)("div",{className:"checkout-total",children:[(0,g.jsx)(d.Z,{className:"divider"}),(0,g.jsxs)(d.Z,{md:"auto",className:"total",children:[(0,g.jsx)("div",{className:"label",children:"Total"}),(0,g.jsxs)("div",{className:"figure",children:["$",e.total]})]}),(0,g.jsx)(d.Z,{md:"auto",children:(0,g.jsx)(l.Z,{id:"checkout-button",onClick:function(){return I(!0)},children:"Checkout"})})]})]})]})}))}}]);
//# sourceMappingURL=605.afe639a8.chunk.js.map