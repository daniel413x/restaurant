"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[463],{8945:function(e,s,t){var a=t(5861),n=t(885),r=t(7757),l=t.n(r),i=t(2791),o=t(2677),u=t(3855),d=t(9743),c=t(3983),m=t(1338),p=t(6925),f=t(3958),b=t(7155),h=t(5251),x=t(5567),S=t(1733),v=t(184);s.Z=function(e){var s=e.onSuccess,t=e.forLogin,r=(0,i.useContext)(f.Z),Z=r.notifications,g=r.user,y=r.cart,j=r.addresses,C=(0,i.useState)(!1),k=(0,n.Z)(C,2),w=k[0],P=k[1],I=(0,i.useState)(!1),N=(0,n.Z)(I,2),R=N[0],q=N[1],E=(0,i.useState)(""),L=(0,n.Z)(E,2),M=L[0],Q=L[1],O=(0,i.useState)(""),A=(0,n.Z)(O,2),D=A[0],F=A[1],U=(0,i.useState)(""),_=(0,n.Z)(U,2),z=_[0],B=_[1],H=(0,i.useState)(""),T=(0,n.Z)(H,2),W=T[0],Y=T[1],G=(0,i.useState)(""),J=(0,n.Z)(G,2),K=J[0],V=J[1],X=(0,i.useState)(""),$=(0,n.Z)(X,2),ee=$[0],se=$[1],te=(0,i.useState)(""),ae=(0,n.Z)(te,2),ne=ae[0],re=ae[1],le=(0,i.useState)(""),ie=(0,n.Z)(le,2),oe=ie[0],ue=ie[1],de=(0,i.useState)(""),ce=(0,n.Z)(de,2),me=ce[0],pe=ce[1],fe=(0,i.useState)(""),be=(0,n.Z)(fe,2),he=be[0],xe=be[1],Se=function(){var e=(0,a.Z)(l().mark((function e(a){var n,r,i,o,u,d,m,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),P(!0),M&&D){e.next=5;break}return Z.message("Please complete required fields",c.Q6,c.j8),e.abrupt("return");case 5:if((0,S.oH)(M)){e.next=9;break}return Z.message("Invalid email format",c.Q6,c.Ex),e.abrupt("return");case 9:if((0,S.uo)(D)||t){e.next=13;break}return Z.message("Please choose a password between 6 and 256 characters",c.Q6,c.Ex),e.abrupt("return");case 13:if(!R||z&&K&&ee&&oe&&me&&he){e.next=16;break}return Z.message("Please complete required fields",c.Q6,c.j8),e.abrupt("return");case 16:if(e.prev=16,!t){e.next=28;break}return e.next=20,(0,b.x4)(M,D);case 20:return n=e.sent,e.next=23,(0,x.y)();case 23:r=e.sent,g.set(n),y.set(r),e.next=43;break;case 28:return i=y.foodItems.length>0,o=localStorage.getItem("guestId"),e.next=32,(0,b.l9)(M,D,o,i?y.foodItems:void 0);case 32:if(u=e.sent,d=u.newUser,m=u.newCart,g.set(d),i&&localStorage.removeItem("guestCartItems"),y.set(m),!R){e.next=43;break}return e.next=41,(0,h.p6)({firstName:z,lastName:K,addressLineOne:ee,addressLineTwo:ne,city:oe,state:me,zip:he,isDefault:!0,UserId:d.id});case 41:p=e.sent,j.addAddress(p);case 43:s(),e.next=49;break;case 46:e.prev=46,e.t0=e.catch(16),Z.message(e.t0.response.data.message,c.Q6,c.j8);case 49:case"end":return e.stop()}}),e,null,[[16,46]])})));return function(s){return e.apply(this,arguments)}}();return(0,v.jsx)(o.Z,{className:"auth-box",children:(0,v.jsxs)(u.Z,{onSubmit:function(e){return Se(e)},children:[(0,v.jsx)(m.Z,{id:"email-field",label:"Email address",onChange:Q,value:M,placeholder:t?"":"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{id:"password-field",label:"Password",type:"password",onChange:F,value:D,placeholder:t?"":"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),t?(0,v.jsx)("div",{className:"no-shift"}):(0,v.jsxs)("div",{className:"default-address-form",children:[(0,v.jsx)(p.Z,{id:"save-default-address-button",label:"Save a default delivery address (optional)",boolean:R,setBoolean:q,classes:"toggle-default-address-form"}),R&&(0,v.jsxs)("div",{children:[(0,v.jsxs)(d.Z,{children:[(0,v.jsx)(m.Z,{id:"first-name-field",label:"First name",onChange:B,value:z,placeholder:"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{label:"Middle name",id:"middle-name-field",classes:"blocked",onChange:Y,value:W,placeholder:"Optional",pressedSubmit:w,setPressedSubmit:P,optional:!0,primaryStyle:!0})]}),(0,v.jsx)(m.Z,{label:"Last name",id:"last-name-field",onChange:V,value:K,placeholder:"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{label:"Address line one",id:"address-line-one-field",onChange:se,value:ee,placeholder:"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{id:"address-line-two-field",label:"Address line two",onChange:re,value:ne,placeholder:"Optional",pressedSubmit:w,setPressedSubmit:P,optional:!0,primaryStyle:!0}),(0,v.jsxs)(d.Z,{className:"city-state-row",children:[(0,v.jsx)(m.Z,{id:"city-field",label:"City",onChange:ue,value:oe,placeholder:"Required",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{label:"State",id:"state-field",classes:"px-1",onChange:pe,value:me,placeholder:"Req.",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0}),(0,v.jsx)(m.Z,{label:"Zip",id:"zip-field",onChange:xe,value:he,placeholder:"Req.",pressedSubmit:w,setPressedSubmit:P,primaryStyle:!0})]})]})]}),(0,v.jsx)(o.Z,{md:"auto",children:(0,v.jsx)(u.Z.Control,{id:"submit-button",type:"submit",value:"Submit"})})]})})}},6925:function(e,s,t){var a=t(885),n=t(2791),r=t(734),l=t(184);function i(e){var s=e.label,t=e.boolean,i=e.setBoolean,o=e.classes,u=e.light,d=e.id,c=(0,n.useState)(!1),m=(0,a.Z)(c,2),p=m[0],f=m[1],b=(0,n.useState)(!1),h=(0,a.Z)(b,2),x=h[0],S=h[1],v=(0,n.useRef)(null);(0,r.Z)(v,(function(){return S(!1)})),(0,n.useEffect)((function(){S(t)}),[t]);var Z=null;return u&&x?Z="box-shadow-light":x&&(Z="box-shadow"),(0,l.jsxs)("button",{id:d,className:"labeled-checkbox-button ".concat(o),ref:v,type:"button",onMouseUp:function(){return f(!1)},onMouseLeave:function(){return f(!1)},onMouseDown:function(){return f(!0)},onMouseEnter:function(e){e.buttons>0&&f(!0)},onClick:function(){i(!t),S(!t)},children:[(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"checkbox-div ".concat(t&&"checked"," ").concat(p&&"active"," ").concat(Z)})}),(0,l.jsx)("div",{className:"label",children:s})]})}i.defaultProps={light:!1,classes:"",id:""},s.Z=i},1338:function(e,s,t){var a=t(885),n=t(2791),r=t(2677),l=t(3855),i=t(184);function o(e){var s=e.label,t=e.onChange,o=e.onFileChange,u=e.value,d=e.placeholder,c=e.pressedSubmit,m=e.setPressedSubmit,p=e.optional,f=e.bsWidth,b=e.primaryStyle,h=e.type,x=e.classes,S=e.id,v=e.tabIndex,Z=(0,n.useState)(!1),g=(0,a.Z)(Z,2),y=g[0],j=g[1];return(0,n.useEffect)((function(){!c||p||u||j(!0)}),[c]),(0,n.useEffect)((function(){m&&(j(!1),m(!1))}),[u]),(0,i.jsxs)(r.Z,{className:"smart-input ".concat(x),md:f,children:[s&&(0,i.jsx)("span",{className:"label",children:s}),"file"===h?(0,i.jsx)(l.Z.Control,{id:S,placeholder:d,type:h,onChange:o,className:"".concat(y&&"warn"," ").concat(b&&"primary-style"),tabIndex:v,onClick:function(){m&&(j(!1),m(!1))}}):(0,i.jsx)(l.Z.Control,{id:S,placeholder:d,type:h,value:u,tabIndex:v,onChange:function(e){return t(e.target.value)},className:"".concat(y&&"warn"," ").concat(b&&"primary-style")})]})}o.defaultProps={placeholder:"",optional:!1,bsWidth:!1,primaryStyle:!1,value:"",onChange:!1,onFileChange:!1,pressedSubmit:!1,setPressedSubmit:!1,label:"",type:"text",classes:"",id:"",tabIndex:void 0},s.Z=o},5463:function(e,s,t){t.r(s);var a=t(885),n=t(2791),r=t(6871),l=t(3504),i=t(7022),o=t(3983),u=t(8945),d=t(3958),c=t(184);s.default=function(){var e=(0,r.TH)(),s=(0,r.s0)(),t=(0,n.useContext)(d.Z),m=t.notifications,p=t.user,f=(0,n.useState)(!1),b=(0,a.Z)(f,2),h=b[0],x=b[1];return(0,n.useEffect)((function(){p.isRegistered&&s(o.Im),e.pathname==="/".concat(o._e)?x(!0):x(!1)}),[]),(0,c.jsxs)(i.Z,{id:"auth",children:[(0,c.jsx)("h2",{children:h?"Login":"Registration"}),(0,c.jsx)(u.Z,{onSuccess:function(){m.message(h?"You logged in successfully":"Registration successful",o.ek,o.j8),s(o.Im)},forLogin:h}),(0,c.jsx)(l.OL,{id:"switch-link",to:"/".concat(h?o._6:o._e),children:h?"Register an account":"I'm already registered"})]})}}}]);
//# sourceMappingURL=463.e33d9d72.chunk.js.map