"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[605],{1338:function(e,t,r){var n=r(885),s=r(2791),a=r(2677),i=r(3855),c=r(184);function u(e){var t=e.label,r=e.onChange,u=e.onFileChange,d=e.value,o=e.placeholder,l=e.pressedSubmit,m=e.setPressedSubmit,p=e.optional,f=e.bsWidth,h=e.primaryStyle,x=e.type,b=e.classes,v=e.id,Z=e.tabIndex,S=(0,s.useState)(!1),j=(0,n.Z)(S,2),y=j[0],g=j[1];return(0,s.useEffect)((function(){!l||p||d||g(!0)}),[l]),(0,s.useEffect)((function(){m&&(g(!1),m(!1))}),[d]),(0,c.jsxs)(a.Z,{className:"smart-input ".concat(b),md:f,children:[t&&(0,c.jsx)("span",{className:"label",children:t}),"file"===x?(0,c.jsx)(i.Z.Control,{id:v,placeholder:o,type:x,onChange:u,className:"".concat(y&&"warn"," ").concat(h&&"primary-style"),tabIndex:Z,onClick:function(){m&&(g(!1),m(!1))}}):(0,c.jsx)(i.Z.Control,{id:v,placeholder:o,type:x,value:d,tabIndex:Z,onChange:function(e){return r(e.target.value)},className:"".concat(y&&"warn"," ").concat(h&&"primary-style")})]})}u.defaultProps={placeholder:"",optional:!1,bsWidth:!1,primaryStyle:!1,value:"",onChange:!1,onFileChange:!1,pressedSubmit:!1,setPressedSubmit:!1,label:"",type:"text",classes:"",id:"",tabIndex:void 0},t.Z=u},580:function(e,t,r){r.d(t,{E7:function(){return l},dT:function(){return c},h_:function(){return u},li:function(){return d},pm:function(){return o}});var n=r(5861),s=r(7757),a=r.n(s),i=r(5229),c=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order/all");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/order/activeorder");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.post("api/order",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(a().mark((function e(t,r){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.put("api/order/changestatus/".concat(t),{status:r});case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},605:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n=r(1413),s=r(5861),a=r(885),i=r(7757),c=r.n(i),u=r(2791),d=r(7022),o=r(2677),l=r(3360),m=r(4483),p=r(3174),f=r(32),h=r(2249),x=r(6183),b=r(1733),v=r(5316),Z=r(3855),S=r(3983),j=r(3958),y=r(3391),g=r(184);var C=function(e){var t=e.onHide,r=e.show,n=e.itemName,a=e.itemId,i=(0,u.useContext)(j.Z),d=i.notifications,o=i.cart,m=i.user,p=function(){var e=(0,s.Z)(c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),e.prev=1,!m.isGuest){e.next=7;break}n=JSON.parse(localStorage.getItem("guestCartItems")).filter((function(e){return e.id!==a})),localStorage.setItem("guestCartItems",JSON.stringify(n)),e.next=9;break;case 7:return e.next=9,(0,y.c5)(a);case 9:o.changeItemQuantity(a,0),d.message("Item removed from cart",S.ek,S.j8),t(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),d.message(e.t0.response.data.message,S.Q6,S.j8);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsx)(v.Z,{show:r,onHide:t,size:"lg",centered:!0,className:"remove-item",children:(0,g.jsxs)(Z.Z,{onSubmit:p,children:[(0,g.jsxs)(v.Z.Body,{children:[(0,g.jsx)("h2",{children:"Remove from cart?"}),n]}),(0,g.jsxs)(v.Z.Footer,{children:[(0,g.jsx)(l.Z,{id:"submit-button",type:"submit",children:"Confirm"}),(0,g.jsx)(l.Z,{id:"cancel-button",onClick:t,children:"Back"})]})]})})},N=r(5987),w=r(1694),k=r.n(w),I=r(162),P=["bsPrefix","variant","animation","size","as","className"],q=u.forwardRef((function(e,t){var r=e.bsPrefix,s=e.variant,a=e.animation,i=e.size,c=e.as,u=void 0===c?"div":c,d=e.className,o=(0,N.Z)(e,P);r=(0,I.vE)(r,"spinner");var l="".concat(r,"-").concat(a);return(0,g.jsx)(u,(0,n.Z)((0,n.Z)({ref:t},o),{},{className:k()(d,l,i&&"".concat(l,"-").concat(i),s&&"text-".concat(s))}))}));q.displayName="Spinner";var T=q,E=r(9743),G=r(1293),H=r(6871),L=r(1338),O=r(580);var z=(0,f.Pi)((function(e){var t=e.onHide,r=e.show,n=e.checkoutItems,i=(0,u.useContext)(j.Z),d=i.notifications,m=i.cart,p=i.user,f=i.addresses,h=(0,u.useState)(""),x=(0,a.Z)(h,2),y=x[0],C=x[1],N=(0,u.useState)(""),w=(0,a.Z)(N,2),k=w[0],I=w[1],P=(0,u.useState)(""),q=(0,a.Z)(P,2),z=q[0],F=q[1],Q=(0,u.useState)(""),B=(0,a.Z)(Q,2),J=B[0],R=B[1],W=(0,u.useState)(""),A=(0,a.Z)(W,2),D=A[0],$=A[1],M=(0,u.useState)(""),_=(0,a.Z)(M,2),U=_[0],V=_[1],X=(0,u.useState)(""),K=(0,a.Z)(X,2),Y=K[0],ee=K[1],te=(0,u.useState)(""),re=(0,a.Z)(te,2),ne=re[0],se=re[1],ae=(0,u.useState)(""),ie=(0,a.Z)(ae,2),ce=ie[0],ue=ie[1],de=(0,u.useState)(""),oe=(0,a.Z)(de,2),le=oe[0],me=oe[1],pe=(0,u.useState)(""),fe=(0,a.Z)(pe,2),he=fe[0],xe=fe[1],be=(0,u.useState)(""),ve=(0,a.Z)(be,2),Ze=ve[0],Se=ve[1],je=(0,u.useState)(!1),ye=(0,a.Z)(je,2),ge=ye[0],Ce=ye[1],Ne=(0,u.useState)(!1),we=(0,a.Z)(Ne,2),ke=we[0],Ie=we[1],Pe=(0,H.s0)(),qe=!y||!k||!z||!J||!U||!Y||!ne||!ce||!le||!he||!Ze,Te=function(){var e=(0,s.Z)(c().mark((function e(t){var r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Ce(!0),!qe){e.next=4;break}return e.abrupt("return",d.message("Please complete all required fields",S.Q6,S.j8));case 4:if(!(0===m.foodItems.length)){e.next=7;break}return e.abrupt("return",d.message("No items in cart",S.Q6,S.j8));case 7:return Ie(!0),e.prev=8,r={firstName:k,lastName:z,addressLineOne:J,addressLineTwo:D,city:U,zip:Y,state:ne},n=m.id,s=p.id,e.next=14,(0,O.pm)({UserId:s,CartId:n,address:r});case 14:return m.clearItems(),e.abrupt("return",Pe(p.isGuest?"/".concat(S.kw,"/").concat(S.Xr):"".concat(S.Oq)));case 18:return e.prev=18,e.t0=e.catch(8),e.abrupt("return",d.message(e.t0.response.data.message,S.Q6,S.j8));case 21:return e.prev=21,Ie(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[8,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e){I(e.firstName),F(e.lastName),R(e.addressLineOne),$(e.addressLineTwo),V(e.city),ee(e.zip),se(e.state)};return(0,u.useEffect)((function(){p.isRegistered&&C(p.email)}),[p.email]),(0,u.useEffect)((function(){f.defaultAddress&&Ee(f.defaultAddress)}),[f.defaultAddress]),(0,g.jsxs)(v.Z,{show:r,onHide:t,centered:!0,className:"shipping-form p-0",id:"checkout",children:[ke&&(0,g.jsx)(T,{animation:"grow",className:"loading-anim"}),(0,g.jsxs)("div",{className:"".concat(ke&&"blocked"," checkout"),children:[(0,g.jsx)(v.Z.Header,{closeButton:!0,children:(0,g.jsxs)(v.Z.Title,{id:"contained-modal-title-vcenter",children:["Checkout"," "]})}),(0,g.jsxs)(Z.Z,{onSubmit:Te,children:[(0,g.jsxs)(v.Z.Body,{children:[(0,g.jsxs)("div",{className:"receipt",children:[(0,g.jsx)("h5",{children:"Receipt"}),n.map((function(e){return(0,g.jsxs)(E.Z,{className:"item-price-pair",children:[(0,g.jsxs)(o.Z,{className:"item",children:[" ",e.name," ",e.quantity>1&&"(".concat(e.quantity,") ")]}),(0,g.jsxs)(o.Z,{className:"price",children:["$",(0,b.qH)(e.price,e.discount)]})]},e.id)})),"\u2014",(0,g.jsxs)(E.Z,{className:"item-price-pair",children:[(0,g.jsx)(o.Z,{children:"Total"}),(0,g.jsx)(o.Z,{children:(0,g.jsxs)("strong",{children:["$",m.total]})})]})]}),(0,g.jsx)("hr",{}),(0,g.jsx)("h5",{children:"Shipping & billing"}),"* = required field",f.all.length>0&&(0,g.jsxs)(G.Z,{children:[(0,g.jsx)(G.Z.Toggle,{children:"Saved addresses"}),(0,g.jsx)(G.Z.Menu,{children:f.all.map((function(e){return(0,g.jsx)(G.Z.Item,{onClick:function(){return Ee(e)},children:e.addressLineOne},e.id)}))})]}),(0,g.jsx)(L.Z,{id:"email-field",label:"Email*",value:y,onChange:C,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0}),(0,g.jsxs)("div",{className:"name-row",children:[(0,g.jsx)(L.Z,{id:"first-name-field",label:"First name*",value:k,onChange:I,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0}),(0,g.jsx)(L.Z,{primaryStyle:!0,id:"last-name-field",label:"Last name*",value:z,onChange:F,pressedSubmit:ge,setPressedSubmit:Ce})]}),(0,g.jsx)(L.Z,{primaryStyle:!0,id:"address-line-one-field",label:"Street address*",value:J,onChange:R,pressedSubmit:ge,setPressedSubmit:Ce}),(0,g.jsx)(L.Z,{label:"Street address Line Two",id:"address-line-two-field",value:D,onChange:$,pressedSubmit:ge,setPressedSubmit:Ce,optional:!0,placeholder:"apt., suite",primaryStyle:!0}),(0,g.jsxs)("div",{className:"city-row",children:[(0,g.jsx)(L.Z,{label:"Territory/City*",id:"city-field",value:U,onChange:V,pressedSubmit:ge,setPressedSubmit:Ce,bsWidth:6,primaryStyle:!0}),(0,g.jsx)(L.Z,{label:"State*",id:"state-field",value:ne,onChange:se,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0}),(0,g.jsx)(L.Z,{label:"Zip address*",id:"zip-field",value:Y,onChange:ee,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0})]}),(0,g.jsx)("hr",{}),(0,g.jsx)("h5",{children:"Payment"}),(0,g.jsx)(L.Z,{label:"Full name on card*",id:"card-name-field",value:ce,onChange:ue,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0}),(0,g.jsxs)("div",{className:"card-number-row",children:[(0,g.jsx)(L.Z,{label:"Card number*",id:"card-number-field",value:le,onChange:me,pressedSubmit:ge,setPressedSubmit:Ce,bsWidth:6,primaryStyle:!0}),(0,g.jsx)(L.Z,{label:"Expir.*",id:"card-expiration-field",value:he,onChange:xe,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0}),(0,g.jsx)(L.Z,{label:"CVC*",id:"card-cvc-field",value:Ze,onChange:Se,pressedSubmit:ge,setPressedSubmit:Ce,primaryStyle:!0})]})]}),(0,g.jsx)(v.Z.Footer,{children:(0,g.jsx)(l.Z,{className:"".concat(qe&&"blocked"),type:"submit",id:"submit-button",children:"Submit"})})]})]})]})}));var F=(0,f.Pi)((function(){var e=(0,u.useContext)(j.Z).cart,t=(0,b.Ih)(e.foodItems),r=t>0,i=(0,u.useState)(!1),f=(0,a.Z)(i,2),v=f[0],Z=f[1],N=(0,u.useState)(!1),w=(0,a.Z)(N,2),k=w[0],I=w[1],P=(0,u.useState)(null),q=(0,a.Z)(P,2),T=q[0],E=q[1],G=function(){var t=(0,s.Z)(c().mark((function t(r,s,a){var i,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a?s+1:s-1,e.id!==S._5){t.next=6;break}u=JSON.parse(localStorage.getItem("guestCartItems")),localStorage.setItem("guestCartItems",JSON.stringify(u.map((function(e){return e.id===r?(0,n.Z)((0,n.Z)({},e),{},{quantity:i}):e})))),t.next=8;break;case 6:return t.next=8,(0,y.x)(r,i);case 8:e.changeItemQuantity(r,i);case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();return(0,g.jsxs)(d.Z,{id:"cart",children:[(0,g.jsx)(C,{show:v,onHide:function(){return Z(!1)},itemName:null===T||void 0===T?void 0:T.name,itemId:null===T||void 0===T?void 0:T.id}),(0,g.jsx)(z,{show:k,onHide:function(){return I(!1)},checkoutItems:e.foodItems}),(0,g.jsxs)(o.Z,{children:[(0,g.jsxs)("h2",{children:["Cart"," ",(0,g.jsx)(m.G,{icon:p.szZ})]}),(0,g.jsx)(o.Z,{className:"items",md:3,children:t?"".concat(t," item").concat(t>1?"s":""," in your cart:"):"No items in your cart"}),(0,g.jsx)(h.Z,{items:e.foodItems,renderList:function(e){return(0,g.jsx)("li",{children:(0,g.jsx)(x.Z,{foodItem:e,handleDeleteModal:function(){return E(e),void Z(!0)},quantity:e.quantity,increment:function(){return G(e.id,e.quantity,!0)},decrement:function(){return G(e.id,e.quantity)}})},e.id)}}),r&&(0,g.jsxs)("div",{className:"checkout-total",children:[(0,g.jsx)(o.Z,{className:"divider"}),(0,g.jsxs)(o.Z,{md:"auto",className:"total",children:[(0,g.jsx)("div",{className:"label",children:"Total"}),(0,g.jsxs)("div",{className:"figure",children:["$",e.total]})]}),(0,g.jsx)(o.Z,{md:"auto",children:(0,g.jsx)(l.Z,{id:"checkout-button",onClick:function(){return I(!0)},children:"Checkout"})})]})]})]})}))}}]);
//# sourceMappingURL=605.b2359af0.chunk.js.map