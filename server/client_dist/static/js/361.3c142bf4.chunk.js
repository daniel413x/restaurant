"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[361],{3710:function(e,r,n){n.d(r,{Z:function(){return w}});var s=n(5861),a=n(885),t=n(7757),c=n.n(t),i=n(2791),o=n(7022),d=n(9743),u=n(2677),l=n(32),v=n(3958),f=n(2249),m=n(7299),p=n(4483),x=n(3174),h=n(184);var j=function(e){var r=e.currentOrb;return(0,h.jsxs)(d.Z,{id:"order-progress",children:[(0,h.jsxs)("div",{className:"orb-wrapper ".concat(0===r&&"in-progress"," ").concat(r>0&&"finished"),children:[(0,h.jsx)("div",{className:"over-connector"}),(0,h.jsx)("div",{className:"under-connector"}),(0,h.jsxs)("div",{className:"outer-orb",children:[(0,h.jsx)(p.G,{className:"icon",icon:x.Ycs}),(0,h.jsx)("div",{className:"inner-orb"})]})]}),(0,h.jsxs)("div",{className:"orb-wrapper ".concat(1===r&&"in-progress"," ").concat(r>1&&"finished"),children:[(0,h.jsx)("div",{className:"over-connector"}),(0,h.jsx)("div",{className:"under-connector"}),(0,h.jsxs)("div",{className:"outer-orb",children:[(0,h.jsx)(p.G,{className:"icon",icon:x.fAl}),(0,h.jsx)("div",{className:"inner-orb"})]})]}),(0,h.jsxs)("div",{className:"orb-wrapper ".concat(2===r&&"in-progress"," ").concat(r>2&&"finished"),children:[(0,h.jsx)("div",{className:"over-connector"}),(0,h.jsx)("div",{className:"under-connector"}),(0,h.jsxs)("div",{className:"outer-orb",children:[(0,h.jsx)(p.G,{className:"icon",icon:x.uYz}),(0,h.jsx)("div",{className:"inner-orb"})]})]}),(0,h.jsx)("div",{className:"orb-wrapper ".concat(3===r&&"finished"),children:(0,h.jsxs)("div",{className:"outer-orb",children:[(0,h.jsx)(p.G,{className:"icon",icon:x.chG}),(0,h.jsx)("div",{className:"inner-orb"})]})})]})};var N=function(e){var r=e.message,n=e.timestamp,s=e.index,a=e.currentOrb;return(0,h.jsxs)("div",{className:"timestamped-action ".concat(s<a&&"old"),children:[n," ",r]})},Z=n(580),b=n(1733);var w=(0,l.Pi)((function(){var e,r,n,t,l,p=(0,i.useContext)(v.Z),x=p.user,w=p.orders,g=(0,i.useState)(0),y=(0,a.Z)(g,2),O=y[0],k=y[1],G=(0,i.useState)(""),P=(0,a.Z)(G,2),E=P[0],L=P[1],C=(0,i.useState)(0),I=(0,a.Z)(C,2),T=I[0],S=I[1],q=(0,i.useState)(0),R=(0,a.Z)(q,2),W=R[0],Y=R[1],$=null===(e=w.activeOrder)||void 0===e?void 0:e.address,z=$.firstName,A=$.lastName,D=$.addressLineOne,Q=$.addressLineTwo,_=$.city,B=$.state,F=$.zip;return(0,i.useEffect)((function(){if(w.activeOrder.actionLog.length){var e=w.activeOrder,r=e.status,n=e.actionLog;L(n[n.length-1][1]),k(r),S(w.activeOrder.time[0]+25-4*r),Y(w.activeOrder.time[1]+25-4*r)}}),[null===(r=w.activeOrder)||void 0===r?void 0:r.status]),(0,i.useEffect)((function(){(0,s.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.isGuest){e.next=6;break}return e.next=3,(0,Z.Wh)();case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,(0,Z.li)();case 8:r=e.sent;case 9:r&&w.setActiveOrder(r);case 10:case"end":return e.stop()}}),e)})))()}),[]),"-1"===w.activeOrder.id?null:(0,h.jsxs)(o.Z,{id:"active-order",children:[(0,h.jsx)("h1",{children:"You placed an order"}),(0,h.jsxs)(d.Z,{className:"main-row",children:[(0,h.jsxs)(u.Z,{className:"items-delivery-address-col",md:6,children:[(0,h.jsxs)("h2",{children:["Order #",(0,h.jsx)("span",{id:"displayed-id",children:null===(n=w.activeOrder)||void 0===n?void 0:n.id.split("").slice(0,8).join("")})]}),(0,h.jsx)(f.Z,{className:"items-ul",id:"items-ul",items:null===(t=w.activeOrder)||void 0===t?void 0:t.foodItems,renderList:function(e){return(0,h.jsx)("li",{children:(0,h.jsx)(m.Z,{foodItem:e})},e.id)}}),(0,h.jsxs)(u.Z,{className:"delivery-address",children:[(0,h.jsx)(u.Z,{className:"label",children:"Deliver to:"}),(0,h.jsxs)(u.Z,{children:[z," ",A]}),(0,h.jsxs)(u.Z,{children:[D," ",Q]}),(0,h.jsxs)(u.Z,{children:[_,", ",B," ",F]})]})]}),(0,h.jsxs)(u.Z,{className:"status",md:6,children:[(0,h.jsx)("h2",{className:"header",children:"The rest is on us!"}),(0,h.jsx)("span",{className:"label",children:"Order status"}),(0,h.jsx)("span",{className:"dynamic-status-subheading",children:E}),(0,h.jsx)(j,{currentOrb:O}),(0,h.jsxs)(d.Z,{className:"info-row",children:[(0,h.jsx)(u.Z,{className:"estimated-time",md:6,children:(0,h.jsxs)("div",{className:"inner-content",children:[(0,h.jsx)("span",{className:"label",children:"Estimated time"}),(0,h.jsx)("span",{className:"figure ".concat(3===O&&"blocked"),children:"".concat(T," - ").concat(W," minutes")})]})}),(0,h.jsx)(u.Z,{className:"order-log",md:6,children:(0,h.jsxs)("div",{className:"inner-content",children:[(0,h.jsx)("span",{className:"label",children:"Order tracker"}),(0,h.jsx)("ul",{id:"timestamped-action-ul",children:null===(l=w.activeOrder)||void 0===l?void 0:l.actionLog.map((function(e,r){return(0,h.jsx)("li",{children:(0,h.jsx)(N,{message:e[1],timestamp:(0,b.Wq)(e[0]),currentOrb:O,index:r})},e[1])}))})]})})]})]})]})]})}))},7299:function(e,r,n){n(2791);var s=n(184);r.Z=function(e){var r=e.foodItem,n=r.name,a=r.ingredients,t=r.quantity,c=r.instructions,i=r.price;return(0,s.jsx)("div",{className:"food-item-order",children:(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("div",{className:"name",children:n}),(0,s.jsx)("div",{className:"ingredients",children:null===a||void 0===a?void 0:a.join(", ")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"quantity",children:"Quantity: ".concat(t)})," ",(0,s.jsx)("span",{className:"price",children:"Price: $".concat(i)})]}),c&&(0,s.jsx)("textarea",{value:c,readOnly:!0})]})})}},2249:function(e,r,n){n(2791);var s=n(184);function a(e){var r=e.items,n=e.renderList,a=e.className,t=e.children,c=e.id;return(0,s.jsxs)("ul",{className:"".concat(a),id:c,children:[null===r||void 0===r?void 0:r.map(n),t]})}a.defaultProps={className:"",children:!1,id:""},r.Z=a},580:function(e,r,n){n.d(r,{$x:function(){return v},E7:function(){return l},Wh:function(){return f},dT:function(){return i},h_:function(){return o},li:function(){return d},pm:function(){return u}});var s=n(5861),a=n(7757),t=n.n(a),c=n(5229),i=function(){var e=(0,s.Z)(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/order");case 2:return r=e.sent,n=r.data,e.abrupt("return",n.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,s.Z)(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/order/all");case 2:return r=e.sent,n=r.data,e.abrupt("return",n.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/order/activeorder");case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)(t().mark((function e(r){var n,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.post("api/order",r);case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)(t().mark((function e(r,n){var s,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.put("api/order/changestatus/".concat(r),{status:n});case 2:return s=e.sent,a=s.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)(t().mark((function e(r){var n,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.post("api/order/guest",r);case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var e=(0,s.Z)(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.G.get("api/order/guest/activeorder");case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},2361:function(e,r,n){n.r(r),n.d(r,{default:function(){return j}});var s=n(32),a=n(2791),t=n(3710),c=n(5861),i=n(7757),o=n.n(i),d=n(7022),u=n(3958),l=n(2249),v=n(7299),f=n(1733),m=n(184);var p=function(e){var r=e.order,n=(0,f.hl)(r.date);return(0,m.jsxs)("div",{className:"previous-order",children:[(0,m.jsx)("div",{className:"date",children:n}),(0,m.jsx)(l.Z,{items:null===r||void 0===r?void 0:r.foodItems,renderList:function(e){return(0,m.jsx)("li",{children:(0,m.jsx)(v.Z,{foodItem:e})},e.id)}}),(0,m.jsx)("div",{className:"date",children:(0,m.jsxs)("div",{children:["Total:"," $",r.total]})})]})},x=n(580);var h=(0,s.Pi)((function(){var e=(0,a.useContext)(u.Z).orders;return(0,a.useEffect)((function(){(0,c.Z)(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.dT)();case 2:n=r.sent,e.setOrders(n);case 4:case"end":return r.stop()}}),r)})))()}),[]),(0,m.jsxs)(d.Z,{id:"previous-orders",children:[(0,m.jsx)("h2",{children:"Previous orders"}),0===e.all.length&&"Previous orders will appear here.",(0,m.jsx)(l.Z,{className:"order-list",items:e.all,renderList:function(e){return(0,m.jsx)("li",{children:(0,m.jsx)(p,{order:e})},e.id)}})]})}));var j=(0,s.Pi)((function(){return(0,m.jsxs)("div",{id:"orders",children:[(0,m.jsx)(t.Z,{}),(0,m.jsx)(h,{})]})}))},2677:function(e,r,n){var s=n(885),a=n(1413),t=n(5987),c=n(1694),i=n.n(c),o=n(2791),d=n(162),u=n(184),l=["as","bsPrefix","className"],v=["className"];var f=o.forwardRef((function(e,r){var n=function(e){var r=e.as,n=e.bsPrefix,s=e.className,c=(0,t.Z)(e,l);n=(0,d.vE)(n,"col");var o=(0,d.pi)(),u=[],v=[];return o.forEach((function(e){var r,s,a,t=c[e];delete c[e],"object"===typeof t&&null!=t?(r=t.span,s=t.offset,a=t.order):r=t;var i="xs"!==e?"-".concat(e):"";r&&u.push(!0===r?"".concat(n).concat(i):"".concat(n).concat(i,"-").concat(r)),null!=a&&v.push("order".concat(i,"-").concat(a)),null!=s&&v.push("offset".concat(i,"-").concat(s))})),[(0,a.Z)((0,a.Z)({},c),{},{className:i().apply(void 0,[s].concat(u,v))}),{as:r,bsPrefix:n,spans:u}]}(e),c=(0,s.Z)(n,2),o=c[0],f=o.className,m=(0,t.Z)(o,v),p=c[1],x=p.as,h=void 0===x?"div":x,j=p.bsPrefix,N=p.spans;return(0,u.jsx)(h,(0,a.Z)((0,a.Z)({},m),{},{ref:r,className:i()(f,!N.length&&j)}))}));f.displayName="Col",r.Z=f},9743:function(e,r,n){var s=n(1413),a=n(5987),t=n(1694),c=n.n(t),i=n(2791),o=n(162),d=n(184),u=["bsPrefix","className","as"],l=i.forwardRef((function(e,r){var n=e.bsPrefix,t=e.className,i=e.as,l=void 0===i?"div":i,v=(0,a.Z)(e,u),f=(0,o.vE)(n,"row"),m=(0,o.pi)(),p="".concat(f,"-cols"),x=[];return m.forEach((function(e){var r,n=v[e];delete v[e],r=null!=n&&"object"===typeof n?n.cols:n;var s="xs"!==e?"-".concat(e):"";null!=r&&x.push("".concat(p).concat(s,"-").concat(r))})),(0,d.jsx)(l,(0,s.Z)((0,s.Z)({ref:r},v),{},{className:c().apply(void 0,[t,f].concat(x))}))}));l.displayName="Row",r.Z=l}}]);
//# sourceMappingURL=361.3c142bf4.chunk.js.map