"use strict";(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[935],{9935:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(5861),a=t(2982),s=t(885),i=t(7757),c=t.n(i),o=t(2791),u=t(2677),l=t(3855),d=t(9743),m=t(1293),f=t(3360),p=t(32),h=t(3958),x=t(3983),g=t(1236),v=t(2239),Z=t(1733),j=t(2249),b=t(3174),N=t(4483),y=t(184);var S=function(e){var n=e.ingredient,t=e.deleteIngredient;return(0,y.jsxs)(d.Z,{className:"edited-ingredient",id:"ingredient-".concat(n),children:[(0,y.jsx)(u.Z,{className:"name",md:"auto",children:n}),(0,y.jsx)(u.Z,{className:"spacer"}),(0,y.jsx)(u.Z,{className:"icon-buttons",md:"auto",children:(0,y.jsx)(f.Z,{id:"delete-ingredient-".concat(n),className:"btn btn-secondary",onClick:function(){return t(n)},children:(0,y.jsx)(N.G,{icon:b.I7k})})})]})},C=t(1338),w=t(8477);function I(e){var n=e.foodItem,t=e.creatingForCategoryId,i=e.closeModalOnSubmit,p=(0,o.useContext)(h.Z),b=p.categories,N=p.notifications,I=(0,o.useState)(!1),k=(0,s.Z)(I,2),F=k[0],P=k[1],O=(0,o.useState)(),L=(0,s.Z)(O,2),U=L[0],R=L[1],E=(0,o.useState)((null===n||void 0===n?void 0:n.name)||""),H=(0,s.Z)(E,2),V=H[0],D=H[1],G=(0,o.useState)(Number(null===n||void 0===n?void 0:n.discount)||0),J=(0,s.Z)(G,2),Q=J[0],q=J[1],z=(0,o.useState)(Number(null===n||void 0===n?void 0:n.price)||3),B=(0,s.Z)(z,2),M=B[0],T=B[1],W=(null===n||void 0===n?void 0:n.price)||0,$=(n?Number((0,Z.qH)(M,Q))!==Number((0,Z.qH)(W,null===n||void 0===n?void 0:n.discount)):null)&&n,A=(0,o.useState)((null===n||void 0===n?void 0:n.image)||""),K=(0,s.Z)(A,2),X=K[0],Y=K[1],_=(0,o.useState)((null===n||void 0===n?void 0:n.ingredients)||[]),ee=(0,s.Z)(_,2),ne=ee[0],te=ee[1],re=(0,o.useState)(""),ae=(0,s.Z)(re,2),se=ae[0],ie=ae[1],ce=(0,o.useState)((null===n||void 0===n?void 0:n.serves)||1),oe=(0,s.Z)(ce,2),ue=oe[0],le=oe[1],de=(0,o.useState)((null===n||void 0===n?void 0:n.time)||[10,15]),me=(0,s.Z)(de,2),fe=me[0],pe=me[1],he=(0,o.useState)(!1),xe=(0,s.Z)(he,2),ge=xe[0],ve=xe[1],Ze=function(e){return te(null===ne||void 0===ne?void 0:ne.filter((function(n){return e!==n})))},je=function(){var e=(0,r.Z)(c().mark((function e(t){var r,a,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),ve(!0),V&&X){e.next=5;break}return N.message("Please complete highlighted fields",x.Q6,x.j8),e.abrupt("return");case 5:if((r=new FormData).append("name",V),r.append("CategoryId",U.id),r.append("discount",JSON.stringify(Q)),r.append("price",JSON.stringify(M)),r.append("imgImage",X),r.append("ingredients",JSON.stringify(ne)),r.append("serves",JSON.stringify(ue)),r.append("time",JSON.stringify(fe)),e.prev=14,!n){e.next=26;break}return e.next=18,(0,w.b9)(n.id,r);case 18:return e.next=20,(0,w.hw)(n.id);case 20:a=e.sent,s=n.CategoryId,U.id!==s?b.updateFoodItem(a,s):b.updateFoodItem(a),N.message("Food item updated successfully",x.ek,x.j8),e.next=31;break;case 26:return e.next=28,(0,w.aj)(r);case 28:o=e.sent,b.addFoodItem(o),N.message("Food item created successfully",x.ek,x.j8);case 31:i&&i(),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(14),N.message(e.t0.response.data.message,x.Q6,x.j8);case 37:case"end":return e.stop()}}),e,null,[[14,34]])})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=b.all.find((function(e){return n?e.id===n.CategoryId:t?e.id===t:"Uncategorized"===e.name}));R(e)}),[n]),(0,y.jsxs)(u.Z,{className:"food-item-form",children:[(0,y.jsx)(g.Z,{show:F,onHide:function(){return P(!1)},onConfirmFunc:function(){N.message("Category deleted",x.Q6,x.j8)},header:'Delete category "'.concat(V,'"?'),body:'Food items under category "'.concat(V,'" will need to be assigned a new category before they appear in the menu.')}),(0,y.jsx)(l.Z,{onSubmit:je,children:(0,y.jsxs)(d.Z,{className:"col-wrapper",children:[(0,y.jsx)(u.Z,{className:"image-col",md:"auto",children:(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label image-col-label",children:"Image"}),(0,y.jsx)(u.Z,{children:(0,y.jsx)(v.Z,{pressedSubmit:ge,setPressedSubmit:ve,dimensions:[650,480],existingImage:null!==n&&void 0!==n&&n.image?"".concat("https://restaurant-36o0.onrender.com/").concat(n.image):"",onChangeSetOutsideFormValue:Y,outsideFormValue:X})})]})}),(0,y.jsxs)(u.Z,{className:"info-col",children:[(0,y.jsxs)(u.Z,{className:"category-menu",children:[(0,y.jsx)(u.Z,{className:"label",children:"Category"}),(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(m.Z.Toggle,{id:"select-category-dropdown",children:null===U||void 0===U?void 0:U.name}),(0,y.jsx)(m.Z.Menu,{children:b.all.map((function(e){return(0,y.jsx)(m.Z.Item,{children:(0,y.jsxs)(f.Z,{onClick:function(){return R({name:e.name,id:e.id})},children:[e.name,"Uncategorized"===e.name&&"/hidden"]})},e.id)}))})]})]}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label",children:"Name"}),(0,y.jsx)(C.Z,{id:"name-field",pressedSubmit:ge,setPressedSubmit:ve,value:V,onChange:D})]}),(0,y.jsxs)(u.Z,{className:"price-control",children:[(0,y.jsxs)(d.Z,{children:[(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label",children:"Price"}),(0,y.jsx)(l.Z.Control,{id:"price-field",value:M,type:"number",onChange:function(e){return T(Number(e.target.value))},min:0})]}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label",children:"Discount"}),(0,y.jsx)(l.Z.Control,{id:"discount-field",value:Q,type:"number",max:"1",step:"0.05",min:"0",onChange:function(e){return q(Number(e.target.value))}})]})]}),(0,y.jsxs)(u.Z,{className:"calculated-price",children:[$&&(0,y.jsx)("span",{className:"previous-price",children:"$".concat(W)}),$&&(0,y.jsx)("span",{children:"\u2192"}),(0,y.jsx)("span",{children:"$".concat((0,Z.qH)(M,Q))})]})]}),(0,y.jsxs)(u.Z,{className:"ingredients",children:[(0,y.jsx)(u.Z,{className:"label",children:"Ingredients"}),ne&&(0,y.jsx)(j.Z,{id:"ingredients-ul",items:ne,renderList:function(e){return(0,y.jsx)("li",{children:(0,y.jsx)(S,{ingredient:e,deleteIngredient:Ze})},e)}}),(0,y.jsxs)(d.Z,{className:"add-ingredient-row",children:[(0,y.jsx)(u.Z,{children:(0,y.jsx)(l.Z.Control,{id:"ingredient-field",value:se,onChange:function(e){return ie(e.target.value)},placeholder:"ingr.1, ingr.2, ..."})}),(0,y.jsx)(u.Z,{md:"auto",children:(0,y.jsx)(f.Z,{id:"new-ingredient-button",className:"btn btn-secondary",onClick:function(){var e=se.split(/,\s+|\s+,|,/).filter(Boolean);e.forEach((function(e){return e.split("").filter(Boolean).join("")}));for(var n=0;n<e.length;n+=1)for(var t=0;t<ne.length;t+=1)if(ne[t]===e[n])return N.message("Ingredient already exists; check input",x.Q6,x.j8);return ie(""),te([].concat((0,a.Z)(ne),(0,a.Z)(e.filter((function(e){return!/[^\S]+\s+[^\S]+/.test(e)})))))},children:"Add"})})]})]}),(0,y.jsxs)(d.Z,{className:"serves-time-row",children:[(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label",children:"Serves"}),(0,y.jsx)(l.Z.Control,{id:"serves-field",value:ue,type:"number",onChange:function(e){return le(Number(e.target.value))},min:1})]}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(u.Z,{className:"label",children:"Time (min, max)"}),(0,y.jsxs)(d.Z,{children:[(0,y.jsx)(u.Z,{className:"min-col",children:(0,y.jsx)(l.Z.Control,{id:"min-field",className:"min",min:"0",max:fe[1],value:fe[0],type:"number",onChange:function(e){return pe([Number(e.target.value),fe[1]])}})}),(0,y.jsx)(u.Z,{className:"max-col",children:(0,y.jsx)(l.Z.Control,{id:"max-field",className:"max",min:fe[0],value:fe[1],type:"number",onChange:function(e){return pe([fe[0],Number(e.target.value)])}})})]})]})]}),(0,y.jsx)(u.Z,{children:(0,y.jsx)(f.Z,{className:"save-button btn btn-secondary",id:"submit-button",type:"submit"})})]})]})})]})}I.defaultProps={foodItem:!1,creatingForCategoryId:!1,closeModalOnSubmit:!1};var k=(0,p.Pi)(I)},2249:function(e,n,t){t(2791);var r=t(184);function a(e){var n=e.items,t=e.renderList,a=e.className,s=e.children,i=e.id;return(0,r.jsxs)("ul",{className:"".concat(a),id:i,children:[null===n||void 0===n?void 0:n.map(t),s]})}a.defaultProps={className:"",children:!1,id:""},n.Z=a},1338:function(e,n,t){var r=t(885),a=t(2791),s=t(2677),i=t(3855),c=t(184);function o(e){var n=e.label,t=e.onChange,o=e.onFileChange,u=e.value,l=e.placeholder,d=e.pressedSubmit,m=e.setPressedSubmit,f=e.optional,p=e.bsWidth,h=e.primaryStyle,x=e.type,g=e.classes,v=e.id,Z=e.tabIndex,j=(0,a.useState)(!1),b=(0,r.Z)(j,2),N=b[0],y=b[1];return(0,a.useEffect)((function(){!d||f||u||y(!0)}),[d]),(0,a.useEffect)((function(){m&&(y(!1),m(!1))}),[u]),(0,c.jsxs)(s.Z,{className:"smart-input ".concat(g),md:p,children:[n&&(0,c.jsx)("span",{className:"label",children:n}),"file"===x?(0,c.jsx)(i.Z.Control,{id:v,placeholder:l,type:x,onChange:o,className:"".concat(N&&"warn"," ").concat(h&&"primary-style"),tabIndex:Z,onClick:function(){m&&(y(!1),m(!1))}}):(0,c.jsx)(i.Z.Control,{id:v,placeholder:l,type:x,value:u,tabIndex:Z,onChange:function(e){return t(e.target.value)},className:"".concat(N&&"warn"," ").concat(h&&"primary-style")})]})}o.defaultProps={placeholder:"",optional:!1,bsWidth:!1,primaryStyle:!1,value:"",onChange:!1,onFileChange:!1,pressedSubmit:!1,setPressedSubmit:!1,label:"",type:"text",classes:"",id:"",tabIndex:void 0},n.Z=o},2239:function(e,n,t){var r=t(885),a=t(2791),s=t(32),i=t(1338),c=t(184);function o(e){var n=e.dimensions,t=e.existingImage,s=e.onChangeSetOutsideFormValue,o=e.pressedSubmit,u=e.setPressedSubmit,l=e.outsideFormValue,d=(0,a.useState)(),m=(0,r.Z)(d,2),f=m[0],p=m[1],h=(0,a.useState)(""),x=(0,r.Z)(h,2),g=x[0],v=x[1],Z=(0,r.Z)(n,2),j=Z[0],b=Z[1];return(0,a.useEffect)((function(){return v(t||"")}),[t]),(0,a.useEffect)((function(){if(f&&t){var e=URL.createObjectURL(f);return v(e),function(){return URL.revokeObjectURL(e)}}if(!f&&t)return v(t);if(!f)return v("");var n=URL.createObjectURL(f);return v(n),function(){return URL.revokeObjectURL(n)}}),[f]),(0,c.jsxs)("div",{className:"upload-image",children:[(0,c.jsx)("div",{className:"image-container",children:f||t?(0,c.jsx)("img",{src:g,alt:"avatar-preview",className:"preview"}):(0,c.jsx)("div",{className:"placeholder-with-dimensions",children:"".concat(j,"x").concat(b)})}),(0,c.jsx)(i.Z,{onFileChange:function(e){e.target.files&&0!==e.target.files.length?(p(e.target.files[0]),s&&s(e.target.files[0])):p(void 0)},type:"file",pressedSubmit:o,setPressedSubmit:u,value:l})]})}o.defaultProps={existingImage:"",onChangeSetOutsideFormValue:!1,pressedSubmit:!1,setPressedSubmit:!1,outsideFormValue:!1},n.Z=(0,s.Pi)(o)},1236:function(e,n,t){t(2791);var r=t(5316),a=t(3855),s=t(3360),i=t(184);function c(e){var n=e.onHide,t=e.show,c=e.header,o=e.body,u=e.onConfirmFunc;return(0,i.jsxs)(r.Z,{show:t,onHide:n,size:"lg",centered:!0,className:"confirmation",children:[(0,i.jsxs)(r.Z.Body,{children:[(0,i.jsx)("h2",{children:c}),o]}),(0,i.jsxs)(r.Z.Footer,{children:[(0,i.jsx)(a.Z,{onSubmit:function(e){e.preventDefault(),u&&u(),n()},children:(0,i.jsx)(s.Z,{id:"submit-button",type:"submit",children:"OK"})}),u&&(0,i.jsx)(s.Z,{id:"cancel-button",onClick:n,children:"Cancel"})]})]})}c.defaultProps={header:"",body:"",onConfirmFunc:!1},n.Z=c},8477:function(e,n,t){t.d(n,{aj:function(){return o},b9:function(){return u},hw:function(){return c},yy:function(){return l}});var r=t(5861),a=t(7757),s=t.n(a),i=t(5229),c=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.get("api/fooditeminmenu/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.post("api/fooditeminmenu",n);case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(s().mark((function e(n,t){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.put("api/fooditeminmenu/".concat(n),t);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.G.delete("api/fooditeminmenu/".concat(n));case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=935.79cf969b.chunk.js.map